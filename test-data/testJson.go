/*
 * Copyright (c) 2024. Devtron Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package test_data

const CdTriggerEventPayloadWithTaskYaml = `	{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"stageYaml":"version: 0.0.1\ncdPipelineConf:\n  - beforeStages:\n      - name: test-1\n        script: |\n          date \u003e test.report\n          echo 'hello'\n        outputLocation: ./test.report\n      - name: test-2\n        script: |\n          date \u003e test2.report\n        outputLocation: ./test2.report","artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar \u003cprakash.kumar@devtron.ai\u003e","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","prePostDeploySteps":null,"refPlugins":null,"IsDryRun": true}}`
const CdTriggerEventPayloadWithTaskYamlBad = `	{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"stageYaml":"version: 0.0.1\ncdPipelineConf:\n  - beforeStages:\n      - name: test-1\n        script: |\n          date \u003e test.report\n          echot 'hello'\n        outputLocation: ./test.report\n      - name: test-2\n        script: |\n          date \u003e test2.report\n        outputLocation: ./test2.report","artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar \u003cprakash.kumar@devtron.ai\u003e","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","prePostDeploySteps":null,"refPlugins":null}}`
const CdTriggerEventPayloadWithTaskYamlWrongOutputPath = `	{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"stageYaml":"version: 0.0.1\ncdPipelineConf:\n  - beforeStages:\n      - name: test-1\n        script: |\n          date \u003e test.report\n          echo 'hello'\n        outputLocation: ./test.report\n      - name: test-2\n        script: |\n          outputLocation: ./test2.report","artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar \u003cprakash.kumar@devtron.ai\u003e","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","prePostDeploySteps":null,"refPlugins":null,"IsDryRun": true}}`

const CdTriggerEventPayloadWithSteps1 = `{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar <prakash.kumar@devtron.ai>","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"prePostDeploySteps":[{"name":"Task 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \necho $hello\necho $appname\nmkdir /output\nexport MY_VARIABLE=\"Hello, World\" >> /output/output.txt","inputVars":[{"name":"teststring","format":"STRING","value":"hello","variableType":"VALUE"},{"name":"appname","format":"STRING","variableType":"REF_GLOBAL","referenceVariableName":"APP_NAME"}],"exposedPorts":null,"outputVars":[{"name":"MY_VARIABLE","format":"STRING","variableType":"VALUE"}],"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":["/output"],"triggerIfParentStageFail":false},{"name":"Task 2","index":2,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \necho $inputVar","inputVars":[{"name":"inputVar","format":"STRING","variableType":"REF_PRE_CI","referenceVariableName":"MY_VARIABLE","referenceVariableStepIndex":1}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":[{"conditionType":"TRIGGER","conditionOnVariable":"inputVar","conditionalOperator":"==","conditionalValue":"Hello, World"}],"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","refPlugins":null,"IsDryRun":true}}`
const CdTriggerEventPayloadWithStepsBad = `{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar <prakash.kumar@devtron.ai>","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"prePostDeploySteps":[{"name":"Task 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \necho $hello\necho $appname\nmkdir /output\nexport MY_VARIABLE=\"Hello, World\" >> /output/output.txt","inputVars":[{"name":"teststring","format":"STRING","value":"hello","variableType":"VALUE"},{"name":"appname","format":"STRING","variableType":"REF_GLOBAL","referenceVariableName":"APP_NAME"}],"exposedPorts":null,"outputVars":[{"name":"MY_VARIABLE","format":"STRING","variableType":"VALUE"}],"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":["/output"],"triggerIfParentStageFail":false},{"name":"Task 2","index":2,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \necho $inputVar","inputVars":[{"name":"inputVar","format":"STRING","variableType":"REF_PRE_CI","referenceVariableName":"MY_VARIABLE","referenceVariableStepIndex":1}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":[{"conditionType":"TRIGGER","conditionOnVariable":"inputVar","conditionalOperator":"==","conditionalValue":"Hello, World"}],"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false},{"name":"Task 3","index":3,"stepType":"INLINE","executorType":"CONTAINER_IMAGE","inputVars":null,"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"alpine:latest","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","refPlugins":null,"IsDryRun":true}}`
const CdTriggerEventPayloadWithStepsVarCheck = `{"type":"CD","ciRequest":null,"cdRequest":{"appId":9,"envId":1,"workflowId":29,"workflowRunnerId":45,"cdPipelineId":23,"triggeredBy":2,"stageYaml":"","artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":false,"commitHash":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","gitTag":"","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant <58689354+nishant-d@users.noreply.github.com>","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"main","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"ciArtifactDTO":{"id":5,"pipelineId":8,"image":"prakash1001/test:6a824121-8-16","imageDigest":"sha256:c2fdcd3d3a065b8fd965ea5d940a2da7c6e25025b65f82405e4367c1af568e6f","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/devtron-labs/getting-started-nodejs\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"6a824121778701ad7ad8505820dbdfd0e5c9a71e\",\"modified-time\":\"2023-02-22T12:33:06Z\",\"data\":null,\"author\":\"Nishant \\u003c58689354+nishant-d@users.noreply.github.com\\u003e\",\"message\":\"Merge pull request #5 from devtron-labs/arm-builds\\n\\nUpdated dockerfile for multi-arch support\",\"branch\":\"main\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":16},"namespace":"devtron-cd","workflowNamePrefix":"45-cd-9-qk9x","cdImage":"quay.io/devtron/test:6a8b10f1-187-5619","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"eXhqanlsaE1iK1AxLzZYUDNUc3dERFJ0eHZJPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"test-app-subs","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","GIT_METADATA":"[{\"GIT_COMMIT_HASH\":\"6a824121778701ad7ad8505820dbdfd0e5c9a71e\",\"GIT_SOURCE_TYPE\":\"SOURCE_TYPE_BRANCH_FIXED\",\"GIT_SOURCE_VALUE\":\"main\"}]","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"main"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/29PRE-cd-9-qk9x","inAppLoggingEnabled":false,"workflowPrefixForLog":"29PRE-cd-9-qk9x","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","isDryRun":false,"prePostDeploySteps":[{"name":"Task 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \nexport outputVar=\"hello\"","inputVars":[{"name":"GIT_SOURCE_COUNT","format":"STRING","value":"1","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_COUNT"},{"name":"GIT_COMMIT_HASH_1","format":"STRING","value":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","variableType":"REF_GLOBAL","referenceVariableName":"GIT_COMMIT_HASH_1"},{"name":"GIT_SOURCE_TYPE_1","format":"STRING","value":"SOURCE_TYPE_BRANCH_FIXED","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_TYPE_1"},{"name":"GIT_SOURCE_VALUE_1","format":"STRING","value":"main","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_VALUE_1"}],"exposedPorts":null,"outputVars":[{"name":"outputVar","format":"STRING","variableType":"VALUE"}],"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false},{"name":"Task 2","index":2,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \nexport finalVar=$receivedVar ","inputVars":[{"name":"receivedVar","format":"STRING","variableType":"REF_PRE_CI","referenceVariableName":"outputVar","referenceVariableStepIndex":1},{"name":"GIT_SOURCE_VALUE_1","format":"STRING","value":"main","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_VALUE_1"},{"name":"GIT_SOURCE_COUNT","format":"STRING","value":"1","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_COUNT"},{"name":"GIT_COMMIT_HASH_1","format":"STRING","value":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","variableType":"REF_GLOBAL","referenceVariableName":"GIT_COMMIT_HASH_1"},{"name":"GIT_SOURCE_TYPE_1","format":"STRING","value":"SOURCE_TYPE_BRANCH_FIXED","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_TYPE_1"}],"exposedPorts":null,"outputVars":[{"name":"finalVar","format":"STRING","variableType":"VALUE"}],"triggerSkipConditions":[{"conditionType":"TRIGGER","conditionOnVariable":"receivedVar","conditionalOperator":"==","conditionalValue":"hello"}],"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"refPlugins":null,"IsDryRun":true}}`
const CdTriggerEventPayloadWithStepsVarCheckBad = `{"type":"CD","ciRequest":null,"cdRequest":{"appId":9,"envId":1,"workflowId":30,"workflowRunnerId":46,"cdPipelineId":23,"triggeredBy":2,"stageYaml":"","artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":false,"commitHash":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","gitTag":"","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant <58689354+nishant-d@users.noreply.github.com>","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"main","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"ciArtifactDTO":{"id":5,"pipelineId":8,"image":"prakash1001/test:6a824121-8-16","imageDigest":"sha256:c2fdcd3d3a065b8fd965ea5d940a2da7c6e25025b65f82405e4367c1af568e6f","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/devtron-labs/getting-started-nodejs\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"6a824121778701ad7ad8505820dbdfd0e5c9a71e\",\"modified-time\":\"2023-02-22T12:33:06Z\",\"data\":null,\"author\":\"Nishant \\u003c58689354+nishant-d@users.noreply.github.com\\u003e\",\"message\":\"Merge pull request #5 from devtron-labs/arm-builds\\n\\nUpdated dockerfile for multi-arch support\",\"branch\":\"main\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":16},"namespace":"devtron-cd","workflowNamePrefix":"46-cd-9-qk9x","cdImage":"quay.io/devtron/test:6a8b10f1-187-5619","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"eXhqanlsaE1iK1AxLzZYUDNUc3dERFJ0eHZJPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"test-app-subs","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","GIT_METADATA":"[{\"GIT_COMMIT_HASH\":\"6a824121778701ad7ad8505820dbdfd0e5c9a71e\",\"GIT_SOURCE_TYPE\":\"SOURCE_TYPE_BRANCH_FIXED\",\"GIT_SOURCE_VALUE\":\"main\"}]","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"main"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/30PRE-cd-9-qk9x","inAppLoggingEnabled":false,"workflowPrefixForLog":"30PRE-cd-9-qk9x","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","isDryRun":false,"prePostDeploySteps":[{"name":"Task 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \nexport outputVar=\"hello\"","inputVars":[{"name":"GIT_COMMIT_HASH_1","format":"STRING","value":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","variableType":"REF_GLOBAL","referenceVariableName":"GIT_COMMIT_HASH_1"},{"name":"GIT_SOURCE_TYPE_1","format":"STRING","value":"SOURCE_TYPE_BRANCH_FIXED","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_TYPE_1"},{"name":"GIT_SOURCE_VALUE_1","format":"STRING","value":"main","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_VALUE_1"},{"name":"GIT_SOURCE_COUNT","format":"STRING","value":"1","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_COUNT"}],"exposedPorts":null,"outputVars":[{"name":"outputVar","format":"STRING","variableType":"VALUE"}],"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false},{"name":"Task 2","index":2,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \nexport finalVar=$receivedVar ","inputVars":[{"name":"receivedVar","format":"STRING","variableType":"REF_PRE_CI","referenceVariableName":"outputVar","referenceVariableStepIndex":1},{"name":"GIT_SOURCE_VALUE_1","format":"STRING","value":"main","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_VALUE_1"},{"name":"GIT_SOURCE_COUNT","format":"STRING","value":"1","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_COUNT"},{"name":"GIT_COMMIT_HASH_1","format":"STRING","value":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","variableType":"REF_GLOBAL","referenceVariableName":"GIT_COMMIT_HASH_1"},{"name":"GIT_SOURCE_TYPE_1","format":"STRING","value":"SOURCE_TYPE_BRANCH_FIXED","variableType":"REF_GLOBAL","referenceVariableName":"GIT_SOURCE_TYPE_1"}],"exposedPorts":null,"outputVars":[{"name":"finalVar","format":"STRING","variableType":"VALUE"}],"triggerSkipConditions":[{"conditionType":"TRIGGER","conditionOnVariable":"receivedVar","conditionalOperator":"==","conditionalValue":"hello"}],"successFailureConditions":[{"conditionType":"FAIL","conditionOnVariable":"finalVar","conditionalOperator":"==","conditionalValue":"hello"}],"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"refPlugins":null,"IsDryRun":true}}`

const CdTriggerEventPayloadWithStepsWithPlugin = `{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar <prakash.kumar@devtron.ai>","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"prePostDeploySteps":[{"name":"K6 Load testing","index":1,"stepType":"REF_PLUGIN","executorType":"PLUGIN","refPluginId":1,"inputVars":[{"name":"RelativePathToScript","format":"STRING","value":"/./script.js","variableType":"VALUE","variableStepIndexInPlugin":1},{"name":"PrometheusUsername","format":"STRING","variableType":"VALUE","variableStepIndexInPlugin":1},{"name":"PrometheusApiKey","format":"STRING","variableType":"VALUE","variableStepIndexInPlugin":1},{"name":"PrometheusRemoteWriteEndpoint","format":"STRING","variableType":"VALUE","variableStepIndexInPlugin":1},{"name":"OutputType","format":"STRING","value":"LOG","variableType":"VALUE","variableStepIndexInPlugin":1}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","refPlugins":[{"id":1,"steps":[{"name":"Step 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"PathToScript=/devtroncd$RelativePathToScript\n\nif [ $OutputType == \"PROMETHEUS\" ]\nthen\n    wget https://go.dev/dl/go1.18.1.linux-amd64.tar.gz\n    rm -rf /usr/local/go && tar -C /usr/local -xzf go1.18.1.linux-amd64.tar.gz\n    export GOPATH=/usr/local/go\n    export GOCACHE=/usr/local/go/cache\n    export PATH=$PATH:/usr/local/go/bin\n    go install go.k6.io/xk6/cmd/xk6@latest\n    xk6 build --with github.com/grafana/xk6-output-prometheus-remote\n    K6_PROMETHEUS_USER=$PrometheusUsername \\\n    K6_PROMETHEUS_PASSWORD=$PrometheusApiKey \\\n    K6_PROMETHEUS_REMOTE_URL=$PrometheusRemoteWriteEndpoint \\\n    ./k6 run $PathToScript -o output-prometheus-remote\nelif [ $OutputType == \"LOG\" ]\nthen\n    docker pull grafana/k6\n\tdocker run --rm -i grafana/k6 run - <$PathToScript\nelse\n    echo \"OUTPUT_TYPE: $OutputType not supported\"\nfi","inputVars":[{"name":"RelativePathToScript","format":"STRING","variableType":"VALUE"},{"name":"PrometheusUsername","format":"STRING","variableType":"VALUE"},{"name":"PrometheusApiKey","format":"STRING","variableType":"VALUE"},{"name":"PrometheusRemoteWriteEndpoint","format":"STRING","variableType":"VALUE"},{"name":"OutputType","format":"STRING","variableType":"VALUE"}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}]}],"IsDryRun":true}}`
const CdTriggerEventPayloadWithSteps2 = `{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar <prakash.kumar@devtron.ai>","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"prePostDeploySteps":[{"name":"Task 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \n","inputVars":[{"name":"test","format":"STRING","value":"\"test\"","variableType":"VALUE"}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":[{"conditionType":"SKIP","conditionOnVariable":"test","conditionalOperator":"==","conditionalValue":"test"}],"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false},{"name":"Task 2","index":2,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \n","inputVars":[{"name":"test","format":"STRING","value":"test","variableType":"VALUE"}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":[{"conditionType":"TRIGGER","conditionOnVariable":"test","conditionalOperator":"==","conditionalValue":"test"}],"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":["/random"],"triggerIfParentStageFail":false},{"name":"Task 3","index":3,"stepType":"INLINE","executorType":"CONTAINER_IMAGE","inputVars":null,"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"alpine:latest","command":"","args":null,"customScriptMount":null,"sourceCodeMount":{"sourcePath":"","destinationPath":"/sourcecode"},"extraVolumeMounts":null,"artifactPaths":["/opt","/tmp"],"triggerIfParentStageFail":false}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","refPlugins":[{"id":1,"steps":[{"name":"Step 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"PathToScript=/devtroncd$RelativePathToScript\n\nif [ $OutputType == \"PROMETHEUS\" ]\nthen\n    wget https://go.dev/dl/go1.18.1.linux-amd64.tar.gz\n    rm -rf /usr/local/go && tar -C /usr/local -xzf go1.18.1.linux-amd64.tar.gz\n    export GOPATH=/usr/local/go\n    export GOCACHE=/usr/local/go/cache\n    export PATH=$PATH:/usr/local/go/bin\n    go install go.k6.io/xk6/cmd/xk6@latest\n    xk6 build --with github.com/grafana/xk6-output-prometheus-remote\n    K6_PROMETHEUS_USER=$PrometheusUsername \\\n    K6_PROMETHEUS_PASSWORD=$PrometheusApiKey \\\n    K6_PROMETHEUS_REMOTE_URL=$PrometheusRemoteWriteEndpoint \\\n    ./k6 run $PathToScript -o output-prometheus-remote\nelif [ $OutputType == \"LOG\" ]\nthen\n    docker pull grafana/k6\n\tdocker run --rm -i grafana/k6 run - <$PathToScript\nelse\n    echo \"OUTPUT_TYPE: $OutputType not supported\"\nfi","inputVars":[{"name":"RelativePathToScript","format":"STRING","variableType":"VALUE"},{"name":"PrometheusUsername","format":"STRING","variableType":"VALUE"},{"name":"PrometheusApiKey","format":"STRING","variableType":"VALUE"},{"name":"PrometheusRemoteWriteEndpoint","format":"STRING","variableType":"VALUE"},{"name":"OutputType","format":"STRING","variableType":"VALUE"}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}]}],"IsDryRun":true}}`
const CdTriggerEventPayloadWithSteps3 = `{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar <prakash.kumar@devtron.ai>","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"prePostDeploySteps":[{"name":"Task 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \necho $hello\necho $appname\nmkdir /output\nexport MY_VARIABLE=\"Hello, World\" >> /output/output.txt","inputVars":[{"name":"teststring","format":"STRING","value":"hello","variableType":"VALUE"},{"name":"appname","format":"STRING","variableType":"REF_GLOBAL","referenceVariableName":"APP_NAME"}],"exposedPorts":null,"outputVars":[{"name":"MY_VARIABLE","format":"STRING","variableType":"VALUE"}],"triggerSkipConditions":null,"successFailureConditions":[{"conditionType":"PASS","conditionOnVariable":"MY_VARIABLE","conditionalOperator":"==","conditionalValue":"dfg"}],"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":["/output"],"triggerIfParentStageFail":false},{"name":"Task 2","index":2,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \necho $inputVar","inputVars":[{"name":"inputVar","format":"STRING","variableType":"REF_PRE_CI","referenceVariableName":"MY_VARIABLE","referenceVariableStepIndex":1}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":[{"conditionType":"TRIGGER","conditionOnVariable":"inputVar","conditionalOperator":"==","conditionalValue":"Hello, World2"}],"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false},{"name":"Task 3","index":3,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \n","inputVars":null,"exposedPorts":null,"outputVars":[{"name":"finalvar","format":"STRING","variableType":"VALUE"}],"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false},{"name":"Task 4","index":4,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \nechot","inputVars":null,"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","refPlugins":null,"IsDryRun":true}}`

const CiTriggerEventPayloadWithoutPrePostStep = `{"type":"CI","ciRequest":{"workflowNamePrefix":"3-ci-1-m5fi-1","pipelineName":"ci-1-m5fi","pipelineId":1,"dockerImageTag":"6a824121-1-3","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-1-m5fi-1.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":false,"commitHash":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","gitTag":"","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant \u003c58689354+nishant-d@users.noreply.github.com\u003e","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"main","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":3,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3-ci-1-m5fi-1","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":null,"postCiSteps":null,"refPlugins":null,"appName":"prakash-20jul","triggerByAuthor":"admin","ciBuildConfig":{"id":1,"buildContextGitMaterialId":1,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":1,"environmentId":0,"orchestratorHost":"http://localhost:4222","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":true,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`
const CiTriggerEventPayloadWithPreStep = `{"type":"CI","ciRequest":{"workflowNamePrefix":"4-ci-1-m5fi-1","pipelineName":"ci-1-m5fi","pipelineId":1,"dockerImageTag":"6a824121-1-4","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-1-m5fi-1.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":false,"commitHash":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","gitTag":"","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant \u003c58689354+nishant-d@users.noreply.github.com\u003e","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"main","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":4,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/4-ci-1-m5fi-1","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":[{"name":"Task 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \necho \"Gojo\"\n#set -v  ## uncomment this to debug the script \n","inputVars":null,"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"postCiSteps":null,"refPlugins":null,"appName":"prakash-20jul","triggerByAuthor":"admin","ciBuildConfig":{"id":1,"buildContextGitMaterialId":1,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":1,"environmentId":0,"orchestratorHost":"http://localhost:4222","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":true,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`
const CiTriggerEventPayloadWithPrePostStep = `{"type":"CI","ciRequest":{"workflowNamePrefix":"5-ci-1-m5fi-1","pipelineName":"ci-1-m5fi","pipelineId":1,"dockerImageTag":"6a824121-1-5","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-1-m5fi-1.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":false,"commitHash":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","gitTag":"","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant \u003c58689354+nishant-d@users.noreply.github.com\u003e","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"main","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":5,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/5-ci-1-m5fi-1","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":[{"name":"Task 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \necho \"Gojo\"\n#set -v  ## uncomment this to debug the script \n","inputVars":null,"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"postCiSteps":[{"name":"Task-1-post","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \necho \"Saturo\"\n#set -v  ## uncomment this to debug the script \n","inputVars":null,"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"refPlugins":null,"appName":"prakash-20jul","triggerByAuthor":"admin","ciBuildConfig":{"id":1,"buildContextGitMaterialId":1,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":1,"environmentId":0,"orchestratorHost":"http://localhost:4222","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":true,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`

const CiTriggerEventWithValidGitHash = `{"type":"CI","ciRequest":{"workflowNamePrefix":"3-ci-1-m5fi-1","pipelineName":"ci-1-m5fi","pipelineId":1,"dockerImageTag":"6a824121-1-3","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-1-m5fi-1.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":true,"commitHash":"6a824121778701ad7ad8505820dbdfd0e5c9a71e","gitTag":"","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant \u003c58689354+nishant-d@users.noreply.github.com\u003e","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"main","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":3,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3-ci-1-m5fi-1","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":null,"postCiSteps":null,"refPlugins":null,"appName":"prakash-20jul","triggerByAuthor":"admin","ciBuildConfig":{"id":1,"buildContextGitMaterialId":1,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":1,"environmentId":0,"orchestratorHost":"http://localhost:4222","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":true,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`
const CiTriggerEventWithEmptyGitHash = `{"type":"CI","ciRequest":{"workflowNamePrefix":"3-ci-1-m5fi-1","pipelineName":"ci-1-m5fi","pipelineId":1,"dockerImageTag":"6a824121-1-3","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-1-m5fi-1.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":false,"commitHash":"","gitTag":"","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant \u003c58689354+nishant-d@users.noreply.github.com\u003e","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"main","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":3,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3-ci-1-m5fi-1","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":null,"postCiSteps":null,"refPlugins":null,"appName":"prakash-20jul","triggerByAuthor":"admin","ciBuildConfig":{"id":1,"buildContextGitMaterialId":1,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":1,"environmentId":0,"orchestratorHost":"http://localhost:4222","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":true,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`
const CiTriggerEventWithInValidGitHash = `{"type":"CI","ciRequest":{"workflowNamePrefix":"3-ci-1-m5fi-1","pipelineName":"ci-1-m5fi","pipelineId":1,"dockerImageTag":"6a824121-1-3","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-1-m5fi-1.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":false,"commitHash":"6a8asdafse234241217sdfdsa78701ad7ad8505820dbdfd0e5c9a71e","gitTag":"","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant \u003c58689354+nishant-d@users.noreply.github.com\u003e","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"main","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":3,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3-ci-1-m5fi-1","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":null,"postCiSteps":null,"refPlugins":null,"appName":"prakash-20jul","triggerByAuthor":"admin","ciBuildConfig":{"id":1,"buildContextGitMaterialId":1,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":1,"environmentId":0,"orchestratorHost":"http://localhost:4222","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":true,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`
const CiTriggerEventWithEmptyGitHashAndSourceValue = `{"type":"CI","ciRequest":{"workflowNamePrefix":"3-ci-1-m5fi-1","pipelineName":"ci-1-m5fi","pipelineId":1,"dockerImageTag":"6a824121-1-3","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-1-m5fi-1.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":false,"commitHash":"","gitTag":"","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant \u003c58689354+nishant-d@users.noreply.github.com\u003e","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":3,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3-ci-1-m5fi-1","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":null,"postCiSteps":null,"refPlugins":null,"appName":"prakash-20jul","triggerByAuthor":"admin","ciBuildConfig":{"id":1,"buildContextGitMaterialId":1,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":1,"environmentId":0,"orchestratorHost":"http://localhost:4222","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":true,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`
const CiTriggerEventWithValidGitTag = `{"type":"CI","ciRequest":{"workflowNamePrefix":"3-ci-1-m5fi-1","pipelineName":"ci-1-m5fi","pipelineId":1,"dockerImageTag":"6a824121-1-3","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-1-m5fi-1.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":false,"commitHash":"","gitTag":"v0.0.2","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant \u003c58689354+nishant-d@users.noreply.github.com\u003e","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"main","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":3,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3-ci-1-m5fi-1","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":null,"postCiSteps":null,"refPlugins":null,"appName":"prakash-20jul","triggerByAuthor":"admin","ciBuildConfig":{"id":1,"buildContextGitMaterialId":1,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":1,"environmentId":0,"orchestratorHost":"http://localhost:4222","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":true,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`
const CiTriggerEventWithInValidGitTag = `{"type":"CI","ciRequest":{"workflowNamePrefix":"3-ci-1-m5fi-1","pipelineName":"ci-1-m5fi","pipelineId":1,"dockerImageTag":"6a824121-1-3","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-1-m5fi-1.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/devtron-labs/getting-started-nodejs","materialName":"1-getting-started-nodejs","checkoutPath":"./","fetchSubmodules":false,"commitHash":"","gitTag":"vwrgrwg0.0.2","commitTime":"2023-02-22T12:33:06Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #5 from devtron-labs/arm-builds\n\nUpdated dockerfile for multi-arch support","author":"Nishant \u003c58689354+nishant-d@users.noreply.github.com\u003e","gitOptions":{"userName":"","password":"","sshPrivateKey":"","accessToken":"","authMode":"ANONYMOUS"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"main","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":3,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3-ci-1-m5fi-1","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":null,"postCiSteps":null,"refPlugins":null,"appName":"prakash-20jul","triggerByAuthor":"admin","ciBuildConfig":{"id":1,"buildContextGitMaterialId":1,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":1,"environmentId":0,"orchestratorHost":"http://localhost:4222","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":true,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`

const CiTriggerEventSourceTypeWebhookPRBased = `{"type":"CI","ciRequest":{"workflowNamePrefix":"9-ci-5-3pce-6","pipelineName":"ci-5-3pce","pipelineId":6,"dockerImageTag":"9ab7977e-9e0683b0-6-9","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-5-3pce-6.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":true,"commitHash":"","gitTag":"","commitTime":"0001-01-01T00:00:00Z","type":"WEBHOOK","message":"","author":"","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"WEBHOOK","sourceValue":"{\"eventId\":1,\"condition\":{\"11\":\"^open$\"}}","WebhookData":{"Id":3,"EventActionType":"merged","Data":{"author":"prakash100198","date":"2023-07-25T06:34:48Z","git url":"https://github.com/prakash100198/HelloWorldProject/pull/4","source branch name":"prakash100198-patch-3","source checkout":"9e0683b051e2045ae5daff8562b49bf24c179f0d","target branch name":"master","target checkout":"9ab7977e41109b05624e8386563797152fcd22ae","title":"Update app.go"}}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":9,"triggeredBy":1,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/9-ci-5-3pce-6","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":null,"postCiSteps":null,"refPlugins":null,"appName":"prakash-21jul","triggerByAuthor":"system","ciBuildConfig":{"id":3,"buildContextGitMaterialId":10,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{"COMMENTS_URL":"https://api.github.com/repos/prakash100198/HelloWorldProject/issues/4/comments"},"enableBuildContext":true,"appId":5,"environmentId":0,"orchestratorHost":"http://localhost:4222","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":true,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`
const CiTriggerEventSSHBased = `{"type":"CI","ciRequest":{"workflowNamePrefix":"10-ci-7-yfpx-11","pipelineName":"ci-7-yfpx","pipelineId":11,"dockerImageTag":"9ab7977e-11-10","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-7-yfpx-11.tar.gz","ciProjectDetails":[{"gitRepository":"git@github.com:prakash100198/HelloWorldProject.git","materialName":"3-HelloWorldProject","checkoutPath":"./","fetchSubmodules":true,"commitHash":"9ab7977e41109b05624e8386563797152fcd22ae","gitTag":"","commitTime":"2023-07-25T06:32:57Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #2 from prakash100198/prakash100198-patch-2\n\nUpdate app.go","author":"Prakash \u003cprakash.kumar@devtron.ai\u003e","gitOptions":{"userName":"","password":"","sshPrivateKey":"----","accessToken":"","authMode":"SSH"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":10,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/10-ci-7-yfpx-11","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":null,"postCiSteps":null,"refPlugins":null,"appName":"prakash-26jul","triggerByAuthor":"admin","ciBuildConfig":{"id":5,"buildContextGitMaterialId":12,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":7,"environmentId":0,"orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":false,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`
const CiTriggerEventUsernamePasswordAndPullSubmodules = `{"type":"CI","ciRequest":{"workflowNamePrefix":"11-ci-5-1jni-3","pipelineName":"ci-5-1jni","pipelineId":3,"dockerImageTag":"9ab7977e-3-11","dockerRegistryId":"prakash","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","dockerConnection":"","dockerCert":"","dockerRepository":"prakash1001/test","checkoutPath":"","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","accessKey":"","secretKey":"","ciCacheLocation":"","ciCacheRegion":"","ciCacheFileName":"ci-5-1jni-3.tar.gz","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":true,"commitHash":"9ab7977e41109b05624e8386563797152fcd22ae","gitTag":"","commitTime":"2023-07-25T06:32:57Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"Merge pull request #2 from prakash100198/prakash100198-patch-2\n\nUpdate app.go","author":"Prakash \u003cprakash.kumar@devtron.ai\u003e","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"containerResources":{"minCpu":"","maxCpu":"","minStorage":"","maxStorage":"","minEphStorage":"","maxEphStorage":"","minMem":"","maxMem":""},"activeDeadlineSeconds":3600,"ciImage":"quay.io/devtron/ci-runner:37b94b38-138-14234","namespace":"devtron-ci","workflowId":11,"triggeredBy":2,"cacheLimit":5000000000,"beforeDockerBuildScripts":null,"afterDockerBuildScripts":null,"ciArtifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","scanEnabled":false,"cloudProvider":"","blobStorageConfigured":false,"blobStorageS3Config":null,"azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/11-ci-5-1jni-3","inAppLoggingEnabled":false,"defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"preCiSteps":null,"postCiSteps":null,"refPlugins":null,"appName":"prakash-21jul","triggerByAuthor":"admin","ciBuildConfig":{"id":3,"buildContextGitMaterialId":10,"useRootBuildContext":true,"ciBuildType":"self-dockerfile-build","dockerBuildConfig":{"dockerfileRelativePath":"Dockerfile","dockerfileContent":"","buildContext":".","useBuildx":false},"buildPackConfig":null},"ciBuildDockerMtuValue":-1,"ignoreDockerCachePush":false,"ignoreDockerCachePull":false,"cacheInvalidate":false,"IsPvcMounted":false,"extraEnvironmentVariables":{},"enableBuildContext":true,"appId":5,"environmentId":0,"orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"Ry9vQjV2RnhEazNRUFVVbWJYSStlaGZ5NUNzPQo","isExtRun":false,"imageRetryCount":0,"imageRetryInterval":5},"cdRequest":null}`
